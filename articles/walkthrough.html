<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=G-76DYGNV0GJ"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-76DYGNV0GJ'); </script> <script src="/assets/js/vendor/lunr.min.js"></script> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Example Application Walkthrough | Agency</title> <meta name="generator" content="Jekyll v3.9.3" /> <meta property="og:title" content="Example Application Walkthrough" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Example Application Walkthrough" /> <meta property="og:description" content="Example Application Walkthrough" /> <link rel="canonical" href="https://createwith.agency/articles/walkthrough" /> <meta property="og:url" content="https://createwith.agency/articles/walkthrough" /> <meta property="og:site_name" content="Agency" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Example Application Walkthrough" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Example Application Walkthrough","headline":"Example Application Walkthrough","url":"https://createwith.agency/articles/walkthrough"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" class="d-none"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <!-- Bootstrap Icons. MIT License: https://github.com/twbs/icons/blob/main/LICENSE.md --> <symbol id="svg-copy" viewBox="0 0 16 16"> <title>Copy</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16"> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1v-1z"/> <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3z"/> </svg> </symbol> <symbol id="svg-copied" viewBox="0 0 16 16"> <title>Copied</title> <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard-check-fill" viewBox="0 0 16 16"> <path d="M6.5 0A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3Zm3 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5h3Z"/> <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1A2.5 2.5 0 0 1 9.5 5h-3A2.5 2.5 0 0 1 4 2.5v-1Zm6.854 7.354-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 0 1 .708-.708L7.5 10.793l2.646-2.647a.5.5 0 0 1 .708.708Z"/> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header" role="banner"> <a href="/" class="site-title lh-tight"> Agency </a> <button id="menu-button" class="site-button btn-reset" aria-label="Toggle menu" aria-pressed="false"> <svg viewBox="0 0 24 24" class="icon" aria-hidden="true"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">Articles</div> <ul class="nav-list"><li class="nav-list-item active"><a href="/articles/walkthrough" class="nav-list-link active">Example Application Walkthrough</a></li><li class="nav-list-item"><a href="/articles/agent_callbacks" class="nav-list-link">Agent Callbacks</a></li><li class="nav-list-item"><a href="/articles/creating_spaces" class="nav-list-link">Creating Spaces</a></li><li class="nav-list-item"><a href="/articles/defining_actions" class="nav-list-link">Defining Actions</a></li><li class="nav-list-item"><a href="/articles/messaging" class="nav-list-link">Messaging</a></li><li class="nav-list-item"><a href="/articles/responses" class="nav-list-link">Responses and Synchronous Messaging</a></li></ul> <ul class="nav-list nav-category-list"> <li class="nav-list-item"><button class="nav-list-expander btn-reset" aria-label="Toggle collection API Documentation" aria-pressed="false"> <svg viewBox="0 0 24 24" aria-hidden="true"><use xlink:href="#svg-arrow-right"></use></svg> </button><div class="nav-category">API Documentation</div> <ul class="nav-list"><li class="nav-list-item"><a href="/api_docs/agency.html" class="nav-list-link">agency</a></li><li class="nav-list-item"><a href="/api_docs/agency/agent.html" class="nav-list-link">agency.agent</a></li><li class="nav-list-item"><a href="/api_docs/agency/logger.html" class="nav-list-link">agency.logger</a></li><li class="nav-list-item"><a href="/api_docs/agency/processor.html" class="nav-list-link">agency.processor</a></li><li class="nav-list-item"><a href="/api_docs/agency/queue.html" class="nav-list-link">agency.queue</a></li><li class="nav-list-item"><a href="/api_docs/agency/schema.html" class="nav-list-link">agency.schema</a></li><li class="nav-list-item"><a href="/api_docs/agency/space.html" class="nav-list-link">agency.space</a></li><li class="nav-list-item"><a href="/api_docs/agency/spaces.html" class="nav-list-link">agency.spaces</a></li><li class="nav-list-item"><a href="/api_docs/agency/spaces/amqp_space.html" class="nav-list-link">agency.spaces.amqp_space</a></li><li class="nav-list-item"><a href="/api_docs/agency/spaces/local_space.html" class="nav-list-link">agency.spaces.local_space</a></li></ul> </li> </ul> </nav> &nbsp </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search" role="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="" aria-label="" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/operand/agency" class="site-button" target="_blank" rel="noopener noreferrer" > Agency on Github️ </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content"> <main> <h1 id="example-application-walkthrough"> <a href="#example-application-walkthrough" class="anchor-heading" aria-labelledby="example-application-walkthrough"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Example Application Walkthrough </h1> <p>The following walkthrough will guide you through the basic concepts of Agency’s API, and how to use it to build a simple agent system.</p> <p>In this walkthrough, we’ll be using the <code class="language-plaintext highlighter-rouge">LocalSpace</code> class for connecting agents. Usage is exactly the same as with <code class="language-plaintext highlighter-rouge">AMQPSpace</code>. The Space type used determines the communication implementation used for the space.</p> <h2 id="creating-a-space-and-adding-agents"> <a href="#creating-a-space-and-adding-agents" class="anchor-heading" aria-labelledby="creating-a-space-and-adding-agents"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Creating a Space and adding Agents </h2> <p>The following snippet, adapted from the <a href="https://github.com/operand/agency/tree/main/examples/demo/">demo application</a>, shows how to instantiate a space and add several agents to it.</p> <p>The application includes <code class="language-plaintext highlighter-rouge">OpenAIFunctionAgent</code> which uses the OpenAI API, a local LLM chat agent named <code class="language-plaintext highlighter-rouge">ChattyAI</code>, the <code class="language-plaintext highlighter-rouge">Host</code> agent which allows access to the host system, and a Gradio based chat application which allows its user to communicate within the space as an agent as well.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Create the space instance
</span><span class="n">space</span> <span class="o">=</span> <span class="n">LocalSpace</span><span class="p">()</span>

<span class="c1"># Add a Host agent to the space, exposing access to the host system
</span><span class="n">space</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">Host</span><span class="p">,</span> <span class="s">"Host"</span><span class="p">)</span>

<span class="c1"># Add a local chat agent to the space
</span><span class="n">space</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">ChattyAI</span><span class="p">,</span>
          <span class="s">"Chatty"</span><span class="p">,</span>
          <span class="n">model</span><span class="o">=</span><span class="s">"EleutherAI/gpt-neo-125m"</span><span class="p">)</span>

<span class="c1"># Add an OpenAI function API agent to the space
</span><span class="n">space</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">OpenAIFunctionAgent</span><span class="p">,</span>
          <span class="s">"FunctionAI"</span><span class="p">,</span>
          <span class="n">model</span><span class="o">=</span><span class="s">"gpt-3.5-turbo-16k"</span><span class="p">,</span>
          <span class="n">openai_api_key</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">"OPENAI_API_KEY"</span><span class="p">),</span>
          <span class="c1"># user_id determines the "user" role in the OpenAI chat API
</span>          <span class="n">user_id</span><span class="o">=</span><span class="s">"User"</span><span class="p">)</span>

<span class="c1"># Connect the Gradio user to the space
</span><span class="n">gradio_user</span> <span class="o">=</span> <span class="n">space</span><span class="p">.</span><span class="n">add_foreground</span><span class="p">(</span><span class="n">GradioUser</span><span class="p">,</span> <span class="s">"User"</span><span class="p">)</span>

<span class="c1"># Launch the gradio UI allowing the user to communicate
</span><span class="n">gradio_user</span><span class="p">.</span><span class="n">demo</span><span class="p">().</span><span class="n">launch</span><span class="p">()</span>
</code></pre></div></div> <p>Let’s break this example down step by step.</p> <h2 id="agent-ids"> <a href="#agent-ids" class="anchor-heading" aria-labelledby="agent-ids"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Agent <code class="language-plaintext highlighter-rouge">id</code>s </h2> <p>Notice first that each agent is given a string <code class="language-plaintext highlighter-rouge">id</code> like <code class="language-plaintext highlighter-rouge">"Host"</code> or <code class="language-plaintext highlighter-rouge">"Chatty"</code>.</p> <p>An agent’s <code class="language-plaintext highlighter-rouge">id</code> is used to uniquely identify the agent within the space. Other agents may send messages to <code class="language-plaintext highlighter-rouge">Chatty</code> or <code class="language-plaintext highlighter-rouge">Host</code> by using their <code class="language-plaintext highlighter-rouge">id</code>’s, as we’ll see later.</p> <h2 id="defining-an-agent-and-its-actions"> <a href="#defining-an-agent-and-its-actions" class="anchor-heading" aria-labelledby="defining-an-agent-and-its-actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Defining an Agent and its Actions </h2> <p>To define an Agent type like <code class="language-plaintext highlighter-rouge">ChattyAI</code>, simply extend the <code class="language-plaintext highlighter-rouge">Agent</code> class. For example:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ChattyAI</span><span class="p">(</span><span class="n">Agent</span><span class="p">):</span>
    <span class="p">...</span>
</code></pre></div></div> <p><strong>Actions</strong> are publicly available methods that agents expose within a space, and may be invoked by other agents.</p> <p>To define actions, you simply define instance methods on the Agent class, and use the <code class="language-plaintext highlighter-rouge">@action</code> decorator. For example the following defines an action called <code class="language-plaintext highlighter-rouge">say</code> that takes a single string argument <code class="language-plaintext highlighter-rouge">content</code>.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">action</span>
<span class="k">def</span> <span class="nf">say</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="s">"""Use this action to say something to Chatty"""</span>
    <span class="p">...</span>
</code></pre></div></div> <p>Other agents may invoke this action by sending a message to <code class="language-plaintext highlighter-rouge">Chatty</code> as we’ll see below.</p> <h2 id="invoking-actions"> <a href="#invoking-actions" class="anchor-heading" aria-labelledby="invoking-actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Invoking Actions </h2> <p>When agents are added to a space, they may send messages to other agents to invoke their actions.</p> <p>An example of invoking an action can be seen here, taken from the <code class="language-plaintext highlighter-rouge">ChattyAI.say()</code> implementation.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">...</span>
<span class="bp">self</span><span class="p">.</span><span class="n">send</span><span class="p">({</span>
    <span class="s">"to"</span><span class="p">:</span> <span class="bp">self</span><span class="p">.</span><span class="n">current_message</span><span class="p">()[</span><span class="s">'from'</span><span class="p">],</span> <span class="c1"># reply to the sender
</span>    <span class="s">"action"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"say"</span><span class="p">,</span>
        <span class="s">"args"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"content"</span><span class="p">:</span> <span class="s">"Hello from Chatty!"</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <p>This demonstrates the basic idea of how to send a message to invoke an action on another agent.</p> <p>When an agent receives a message, it invokes the actions method, passing <code class="language-plaintext highlighter-rouge">action.args</code> as keyword arguments to the method.</p> <p>So here, Chatty is invoking the <code class="language-plaintext highlighter-rouge">say</code> action on the sender of the current message that they received. This simple approach allows the original sender and Chatty to have a conversation using only the <code class="language-plaintext highlighter-rouge">say</code> action.</p> <p>Note the use of <code class="language-plaintext highlighter-rouge">current_message()</code>. That method may be used during an action to inspect the entire message which invoked the current action.</p> <h2 id="discovering-agents-and-their-actions"> <a href="#discovering-agents-and-their-actions" class="anchor-heading" aria-labelledby="discovering-agents-and-their-actions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Discovering Agents and their Actions </h2> <p>At this point, we can demonstrate how agent and action discovery works from the perspective of an agent.</p> <p>All agents implement a <code class="language-plaintext highlighter-rouge">help</code> action, which returns a dictionary of their available actions for other agents to discover.</p> <p>To request <code class="language-plaintext highlighter-rouge">help</code> information, an agent may send something like the following:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="bp">self</span><span class="p">.</span><span class="n">send</span><span class="p">({</span>
    <span class="s">"to"</span><span class="p">:</span> <span class="s">"Chatty"</span>
    <span class="s">"action"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"help"</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <p><code class="language-plaintext highlighter-rouge">"Chatty"</code> will respond by returning a message with a dictionary of available actions. For example, if <code class="language-plaintext highlighter-rouge">"Chatty"</code> implements a single <code class="language-plaintext highlighter-rouge">say</code> action as shown above, it will respond with:</p> <div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span>
    <span class="dl">"</span><span class="s2">say</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
      <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Use this action to say something to Chatty</span><span class="dl">"</span><span class="p">,</span>
      <span class="dl">"</span><span class="s2">args</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
          <span class="dl">"</span><span class="s2">content</span><span class="dl">"</span><span class="p">:</span> <span class="p">{</span>
              <span class="dl">"</span><span class="s2">type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">string</span><span class="dl">"</span><span class="p">,</span>
              <span class="dl">"</span><span class="s2">description</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">What to say to Chatty</span><span class="dl">"</span>
          <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div> <p>This is how agents may discover available actions on other agents.</p> <h3 id="broadcasting-help"> <a href="#broadcasting-help" class="anchor-heading" aria-labelledby="broadcasting-help"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Broadcasting <code class="language-plaintext highlighter-rouge">help</code> </h3> <p>But how does an agent know which agents are present in the space?</p> <p>To discover all agents in the space, an agent can broadcast a message using the special id <code class="language-plaintext highlighter-rouge">*</code>. For example:</p> <div class="language-py highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="bp">self</span><span class="p">.</span><span class="n">send</span><span class="p">({</span>
    <span class="s">"to"</span><span class="p">:</span> <span class="s">"*"</span><span class="p">,</span>
    <span class="s">"action"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"help"</span><span class="p">,</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <p>The above will broadcast the <code class="language-plaintext highlighter-rouge">help</code> message to all agents in the space, who will individually respond with their available actions. This way, an agent may discover all the agents in the space and their actions.</p> <p>To request help on a specific action, you may supply the action name as an argument:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="bp">self</span><span class="p">.</span><span class="n">send</span><span class="p">({</span>
    <span class="s">"to"</span><span class="p">:</span> <span class="s">"*"</span><span class="p">,</span>
    <span class="s">"action"</span><span class="p">:</span> <span class="p">{</span>
        <span class="s">"name"</span><span class="p">:</span> <span class="s">"help"</span><span class="p">,</span>
        <span class="s">"args"</span><span class="p">:</span> <span class="p">{</span>
            <span class="s">"action_name"</span><span class="p">:</span> <span class="s">"say"</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">})</span>
</code></pre></div></div> <p>The above will broadcast the <code class="language-plaintext highlighter-rouge">help</code> action, requesting help specifically on the <code class="language-plaintext highlighter-rouge">say</code> action.</p> <p>Note that broadcasts may be used for other messages as well. See <a href="https://createwith.agency/articles/messaging">the messaging article</a> for more details.</p> <h2 id="adding-an-intelligent-agent"> <a href="#adding-an-intelligent-agent" class="anchor-heading" aria-labelledby="adding-an-intelligent-agent"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding an Intelligent Agent </h2> <p>Now that we understand how agents communicate and discover each other, let’s add an intelligent agent to the space which can use these abilities.</p> <p>To add the <code class="language-plaintext highlighter-rouge">OpenAIFunctionAgent</code> to the space:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">space</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">OpenAIFunctionAgent</span><span class="p">,</span>
          <span class="s">"FunctionAI"</span><span class="p">,</span>
          <span class="n">model</span><span class="o">=</span><span class="s">"gpt-3.5-turbo-16k"</span><span class="p">,</span>
          <span class="n">openai_api_key</span><span class="o">=</span><span class="n">os</span><span class="p">.</span><span class="n">getenv</span><span class="p">(</span><span class="s">"OPENAI_API_KEY"</span><span class="p">),</span>
          <span class="c1"># user_id determines the "user" role in the chat API
</span>          <span class="n">user_id</span><span class="o">=</span><span class="s">"User"</span><span class="p">)</span>
</code></pre></div></div> <p>If you inspect <a href="https://github.com/operand/agency/tree/main/agency/agents/demo_agent.py">the implementation</a> of <code class="language-plaintext highlighter-rouge">OpenAIFunctionAgent</code>, you’ll see that this agent uses the <code class="language-plaintext highlighter-rouge">after_add</code> callback to immediately request help information from the other agents in the space when added. It later uses that information to provide a list of functions to the OpenAI function calling API, allowing the LLM to see agent actions as functions it may invoke.</p> <p>In this way, the <code class="language-plaintext highlighter-rouge">OpenAIFunctionAgent</code> can discover other agents in the space and interact with them intelligently as needed.</p> <h2 id="adding-a-user-interface"> <a href="#adding-a-user-interface" class="anchor-heading" aria-labelledby="adding-a-user-interface"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Adding a User Interface </h2> <p>There are two general approaches you might follow to implement a user-facing application which interacts with a space:</p> <ol> <li> <p>You may represent the user-facing application as an individual agent, having it act as a “liason” between the user and the space. User intentions can be mapped to actions that the “liason” agent can invoke on behalf of the user. In this approach, users would not need to know the details of the underlying communication.</p> </li> <li> <p>Individual human users may be represented as individual agents in a space. This approach allows your application to provide direct interaction with agents by users and has the benefit of allowing actions to be invoked directly, enabling more powerful interactive possibilities.</p> <p>This is the approach taken in <a href="https://github.com/operand/agency/tree/main/examples/demo">the demo application</a>.</p> <p>For example, the demo UI (currently implemented in <a href="https://gradio.app">Gradio</a>) allows users to directly invoke actions via a “slash” syntax similar to the following:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> /Chatty.say content:"Hello"
</code></pre></div> </div> <p>This allows the user to work hand-in-hand with intelligent agents, and is one of the driving visions behind Agency’s design.</p> <p>See the <a href="https://github.com/operand/agency/tree/main/examples/demo/">demo application</a> for a full working example of this approach.</p> </li> </ol> <h2 id="next-steps"> <a href="#next-steps" class="anchor-heading" aria-labelledby="next-steps"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Next Steps </h2> <p>This concludes the example walkthrough. To try out the working demo, please jump to the <a href="https://github.com/operand/agency/tree/main/examples/demo/">examples/demo</a> directory.</p> </main> </div> </div> <div class="search-overlay"></div> </div> </body> </html>
